# Chi Safe Path
[![Build Status](https://travis-ci.org/pjsier/chisafepath.svg?branch=master)](https://travis-ci.org/pjsier/chisafepath)

Web app started at Chi Hack Night allowing people to submit 311 requests about
sidewalk accessibility hazards to the City of Chicago 311 API, and get directions
that avoid reported issues.

Live site here: [Chi Safe Path](http://www.chisafepath.com/)

## Local Setup

To run locally, you'll need Git, Ruby, Rails, and Postgres installed.

If you don't have Postgres installed, [Postgres.app](http://postgresapp.com/) is
an easy way to install on Mac, and Windows has some graphical installers here [Postgres Windows installers](https://www.postgresql.org/download/windows/).

Once you have Postgres installed, run the following in the command prompt to create
a Postgres user `chisafepath` with the ability to create databases:

`psql -c "CREATE USER chisafepath WITH CREATEDB;" -U postgres`

The application also uses AWS S3 for storage of uploaded images, and credentials for
this are required as environment variables. These credentials need to be supplied,
even if they're fake, so OSX users can run `source test_env.sh` to export these.

After you've completed initial setup, run the following into the command prompt
to clone the repository, create the database, and seed it with some initial data
(the last command might take a bit):

```bash
git clone https://github.com/pjsier/chisafepath.git
cd chisafepath
bundle install
rake db:create
rake db:schema:load
rake db:seed
```

If this completes without error messages, you should be able to run the application
locally with `rails s`, and it will be located at `http://localhost:3000`

## Routing

The routing server is a modified version of [OpenTripPlanner](https://github.com/opentripplanner/OpenTripPlanner),
and can be generated by creating and running the Dockerfile in [Dockerfile-otp](Dockerfile-otp).
A more detailed description of how to run this from the Dockerfile it's based on
is located at this repo:  [docker-otp-chicago](https://github.com/thcrock/docker-otp-chicago)

Front end for the routing is based on [a fork of bliksemlabs routing interface](https://github.com/pjsier/whitelabel)

## Open311

All issues are submitted to and pulled from [Chicago's Open 311 API](http://311api.cityofchicago.org/).
If you'd like to request your own API key, or see more detailed documentation, you
can find it here: [Open311 API Documentation](http://dev.cityofchicago.org/docs/api).

## Contributing

If you'd like to contribute any changes, fork the repository, make any changes
in a separate branch, and open up a pull request against the `master` branch.

## Credits

All data regarding sidewalk issues is submitted to, and gathered from, [Chicago's Open 311 API](http://311api.cityofchicago.org/).
